<!DOCTYPE html><html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador del Sistema Solar 3D</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow: hidden;
        }
        #solar-system-canvas {
            width: 100%;
            height: 100%;
            display: block;
            background-color: #000;
        }
        #planet-list-panel {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #planet-list-panel::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div class="flex flex-col md:flex-row h-screen">
        <div id="planet-list-panel" class="w-full md:w-1/4 p-4 overflow-y-auto bg-gray-800 rounded-lg shadow-lg m-2 flex-shrink-0">
            <h2 class="text-2xl font-bold mb-4 text-center text-blue-400">Explorador Solar</h2>
            <ul id="planet-list" class="space-y-2"></ul>
        </div>
        <div class="flex-1 flex flex-col items-center justify-center relative">
            <canvas id="solar-system-canvas" class="w-full h-full rounded-lg shadow-lg m-2"></canvas>
            <div id="loading-spinner" class="absolute inset-0 flex flex-col items-center justify-center bg-gray-900 bg-opacity-75 z-50">
                <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
                <p class="mt-4 text-lg text-blue-300">Cargando sistema solar...</p>
            </div>
            <div id="planet-info-panel" class="absolute bottom-4 left-4 right-4 bg-gray-800 p-4 rounded-xl shadow-2xl hidden md:block border border-gray-700">
                <h3 id="planet-name" class="text-3xl font-extrabold mb-2 text-yellow-300"></h3>
                <p id="planet-description" class="text-base mb-3 text-gray-300"></p>
                <p id="planet-details" class="text-sm text-gray-400"></p>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script>
        // El script JavaScript completo est√° en la p√°gina Canvas
    </script>
</body>
</html><!-- Agrega esto antes del cierre del </body> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
<script>
    // Todo el contenido JS que estaba en tu <script type="module"> va aqu√≠ sin 'import'

    const canvas = document.getElementById('solar-system-canvas');
    const loadingSpinner = document.getElementById('loading-spinner');
    const planetInfoPanel = document.getElementById('planet-info-panel');
    const planetNameElement = document.getElementById('planet-name');
    const planetDescriptionElement = document.getElementById('planet-description');
    const planetDetailsElement = document.getElementById('planet-details');
    const planetListElement = document.getElementById('planet-list');

    let scene, camera, renderer, controls;
    const planets = [];
    const planetOrbits = [];

    const planetsData = [
        { name: "Mercurio", size: 0.05, distance: 0.39, orbitalPeriod: 88, rotationPeriod: 58.6, color: 0xAAAAAA, description: "El planeta m√°s peque√±o y cercano al Sol, con una superficie rocosa y cr√°teres.", icon: "ü™ê" },
        { name: "Venus", size: 0.09, distance: 0.72, orbitalPeriod: 225, rotationPeriod: -243, color: 0xFFA500, description: "Conocido por su atm√≥sfera densa y t√≥xica y su rotaci√≥n retr√≥grada (en sentido contrario).", icon: "‚≠ê" },
        { name: "Tierra", size: 0.1, distance: 1, orbitalPeriod: 365, rotationPeriod: 1, color: 0x0000FF, description: "Nuestro hogar, el √∫nico planeta conocido con vida y abundante agua l√≠quida.", icon: "üåç" },
        { name: "Marte", size: 0.07, distance: 1.52, orbitalPeriod: 687, rotationPeriod: 1.03, color: 0xFF0000, description: "El Planeta Rojo, con una superficie rocosa, volcanes y ca√±ones, y dos lunas peque√±as.", icon: "üî¥" },
        { name: "J√∫piter", size: 0.5, distance: 5.2, orbitalPeriod: 4333, rotationPeriod: 0.41, color: 0xFFA07A, description: "El planeta m√°s grande del sistema solar, un gigante gaseoso con una Gran Mancha Roja.", icon: "üü†" },
        { name: "Saturno", size: 0.45, distance: 9.58, orbitalPeriod: 10759, rotationPeriod: 0.44, color: 0xFFD700, description: "Famoso por sus impresionantes anillos compuestos de hielo y roca.", icon: "üü°" },
        { name: "Urano", size: 0.3, distance: 19.22, orbitalPeriod: 30687, rotationPeriod: -0.72, color: 0xADD8E6, description: "Un gigante de hielo que gira de lado, con una atm√≥sfera fr√≠a y metano.", icon: "üîµ" },
        { name: "Neptuno", size: 0.28, distance: 30.05, orbitalPeriod: 60190, rotationPeriod: 0.67, color: 0x4169E1, description: "El planeta m√°s lejano del Sol, con vientos supers√≥nicos y una atm√≥sfera azul vibrante.", icon: "üî∑" },
        { name: "Plut√≥n", size: 0.03, distance: 39.5, orbitalPeriod: 90560, rotationPeriod: 6.39, color: 0x808080, description: "Un planeta enano en el Cintur√≥n de Kuiper, con una superficie helada y una atm√≥sfera tenue.", icon: "‚ö™" }
    ];

    const ORBITAL_SPEED_SCALE = 0.0001;
    const ROTATION_SPEED_SCALE = 0.01;

    function init() {
        try {
            const parent = canvas.parentElement;
            const width = parent.clientWidth;
            const height = parent.clientHeight;

            if (width === 0 || height === 0) {
                throw new Error("Canvas tiene dimensiones cero. Verifica el layout CSS.");
            }

            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x050510);

            camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.set(0, 5, 20);

            renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
            renderer.setSize(width, height);
            renderer.setPixelRatio(window.devicePixelRatio);

            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 1;
            controls.maxDistance = 100;

            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);

            const sunLight = new THREE.PointLight(0xFFFFFF, 1.5, 0, 2);
            sunLight.position.set(0, 0, 0);
            scene.add(sunLight);

            const sunGeometry = new THREE.SphereGeometry(1, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xFFA500 });
            const sun = new THREE.Mesh(sunGeometry, sunMaterial);
            scene.add(sun);

            planetsData.forEach(data => {
                const planetGroup = new THREE.Group();
                scene.add(planetGroup);

                const planetGeometry = new THREE.SphereGeometry(data.size, 32, 32);
                const planetMaterial = new THREE.MeshStandardMaterial({ color: data.color });
                const planet = new THREE.Mesh(planetGeometry, planetMaterial);
                planet.position.x = data.distance;
                planet.userData = { name: data.name, description: data.description, details: data };
                planetGroup.add(planet);
                planets.push(planet);

                const orbitPoints = new THREE.EllipseCurve(0, 0, data.distance, data.distance, 0, 2 * Math.PI, false, 0).getPoints(100);
                const orbitGeometry = new THREE.BufferGeometry().setFromPoints(orbitPoints.map(p => new THREE.Vector3(p.x, 0, p.y)));
                const orbitMaterial = new THREE.LineBasicMaterial({ color: 0x333333 });
                const orbit = new THREE.Line(orbitGeometry, orbitMaterial);
                orbit.rotation.x = Math.PI / 2;
                planetOrbits.push(orbit);
                scene.add(orbit);

                const listItem = document.createElement('li');
                listItem.className = 'flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors duration-200';
                listItem.innerHTML = `<span class="text-xl mr-2">${data.icon}</span> ${data.name}`;
                listItem.addEventListener('click', () => {
                    displayPlanetInfo(data);
                    controls.target.copy(planet.position);
                    controls.update();
                });
                planetListElement.appendChild(listItem);
            });

            loadingSpinner.classList.add('hidden');
            console.log("Sistema solar inicializado correctamente.");
        } catch (error) {
            console.error("Error al inicializar el sistema solar:", error);
            loadingSpinner.innerHTML = `<p class="text-red-500 text-center">Error: ${error.message}</p>`;
            canvas.style.display = 'none';
        }
    }

    function animate() {
        requestAnimationFrame(animate);

        planets.forEach(planet => {
            const data = planet.userData.details;
            const orbitalSpeed = (2 * Math.PI / data.orbitalPeriod) * ORBITAL_SPEED_SCALE;
            const angle = Date.now() * orbitalSpeed;
            planet.position.x = data.distance * Math.cos(angle);
            planet.position.z = data.distance * Math.sin(angle);

            const rotationSpeed = (2 * Math.PI / data.rotationPeriod) * ROTATION_SPEED_SCALE;
            planet.rotation.y += rotationSpeed;
        });

        controls.update();
        renderer.render(scene, camera);
    }

    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();

    function onCanvasClick(event) {
        const rect = canvas.getBoundingClientRect();
        mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
        mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

        raycaster.setFromCamera(mouse, camera);
        const intersects = raycaster.intersectObjects(planets);

        if (intersects.length > 0) {
            const clickedPlanet = intersects[0].object;
            displayPlanetInfo(clickedPlanet.userData.details);
            controls.target.copy(clickedPlanet.position);
            controls.update();
        }
    }

    function displayPlanetInfo(data) {
        planetNameElement.textContent = data.name;
        planetDescriptionElement.textContent = data.description;
        planetDetailsElement.innerHTML = `
            <p><strong>Tama√±o Relativo:</strong> ${data.size.toFixed(2)} (Tierra = 1)</p>
            <p><strong>Distancia al Sol (UA):</strong> ${data.distance.toFixed(2)}</p>
            <p><strong>Per√≠odo Orbital:</strong> ${data.orbitalPeriod} d√≠as terrestres</p>
            <p><strong>Per√≠odo de Rotaci√≥n:</strong> ${Math.abs(data.rotationPeriod)} d√≠as terrestres</p>
            ${data.rotationPeriod < 0 ? '<p class="text-red-400"><em>Rotaci√≥n retr√≥grada</em></p>' : ''}
        `;
        planetInfoPanel.classList.remove('hidden');
    }

    document.addEventListener('DOMContentLoaded', () => {
        init();
        animate();
        canvas.addEventListener('click', onCanvasClick);
    });
</script>
